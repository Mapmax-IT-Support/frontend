{"ast":null,"code":"import _defineProperty from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{useState,useEffect}from'react';import Table from'react-bootstrap/Table';import Accordion from'react-bootstrap/Accordion';import Form from'react-bootstrap/Form';import{updateBusinessType}from'../../../Actions/business-actions';import{BUSINESS_TYPES}from'../../../Constants';import Card from'react-bootstrap/Card';import{connect}from'react-redux';import{createSelector}from'reselect';import{updateDataRange}from'../../../Actions/dataRange-actions';import{updateStatsZip,updateStatsTradezone}from'../../../Actions/stats-actions';import{isCitySelector,tractSelector,addressSelector,dataRangeSelector,tradeZoneBoundsSelector,statsSelector,geoUnitSelector,businessTypeSelector}from'../../../Reducers/selectors';import Button from'react-bootstrap/Button';import{createTradeZoneStats}from'../../../Requests/locations-requests';import{updateTradeZoneBounds}from'../../../Actions/tradeZoneBoundaries-actions';import{AiOutlineInfoCircle}from'react-icons/ai';import{getZipData,getTradezoneData}from'../../../Requests/tradezones-requests';import Modal from'react-bootstrap/Modal';import{determineRadius}from'../../utils/distance';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ZIP='zip code tabulation area';export var TRADE_ZONE='tradeZone';var darkBg='rgb(26,28,41)';var lightBg='rgb(31,33,48)';var textPrimary='whitesmoke';var DemographicsPanel=/*#__PURE__*/function(_React$Component){_inherits(DemographicsPanel,_React$Component);var _super=_createSuper(DemographicsPanel);function DemographicsPanel(props){var _this;_classCallCheck(this,DemographicsPanel);_this=_super.call(this,props);// reconcile state display and backend business type encoding\n_this.onUpdateDataRange=function(event){var val=event.target.value;if(val==='zip'){_this.props.onUpdateDataRange(ZIP);_this.setState({zipVariant:'light',tzVariant:'dark'});}else if(val=='tradeZone'){_this.props.onUpdateDataRange(TRADE_ZONE);_this.setState({zipVariant:'dark',tzVariant:'light'});}};_this.onUpdateStatsZip=function(stats){updateStatsZip(stats);};_this.onUpdateStatsTZ=function(stats){updateStatsTradezone(stats);};_this.getZip=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var address,state,zip,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:address=_this.props.address;state=address.state,zip=address.zip;_context.next=4;return getZipData(state,zip);case 4:res=_context.sent;if(res.length>=1){_this.setState({zipStats:res[0].stats,accordianKeys:_objectSpread(_objectSpread({},_this.state.accordianKeys),{},{zip:['0','1','2','3']})});_this.props.onUpdateStatsZip(res[0]);}else{_this.setState({zipHeader:'Zip Unavailable',zipDisabled:true});_this.props.onUpdateDataRange(TRADE_ZONE);_this.setState({zipVariant:'dark',tzVariant:'light'});}case 6:case\"end\":return _context.stop();}}},_callee);}));_this.loadNewTradeZoneStats=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this$props,address,stats,params,radius,isnyc,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,address=_this$props.address,stats=_this$props.stats;params=determineRadius(address.zip);radius=params.radius,isnyc=params.isnyc;_this.setState({isnyc:isnyc});_context2.next=6;return getTradezoneData(address.state,address.zip,address.coords.lat,address.coords.lng,radius,isnyc);case 6:res=_context2.sent;if(res.stats){// set internal state\n_this.setState({tradeZoneStats:res.stats,statsLoaded:true,hasValidTradeZone:false,// wtf is this named that???\naccordianKeys:_objectSpread(_objectSpread({},_this.state.accordianKeys),{},{tradeZone:['0','1','2','3']})});_this.props.onUpdateStatsTZ(res);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));_this.checkForTradeZone=function(){return new Promise(function(resolve){if(_this.state.tradeZoneStats==null){var loop=setInterval(function(){if(_this.state.tradeZoneStats!=null){clearInterval(loop);resolve();}},100);}else resolve();});};_this.onUpdateTradeZoneBounds=function(tradeZone_bounds){_this.props.onUpdateTradeZoneBounds(tradeZone_bounds);};_this.setModalShow=function(flag){_this.setState({showModal:flag});};_this.onBusinessFormChange=function(event){var type=event.target.value;_this.setState({business_type:type});// for props\nif(type=='hotels /lodging')type='lodging';var business={type:type.replace(/ /g,'_'),priceLevel:0};_this.onUpdateBusinessType(business);};_this.hasValidTradeZone=function(){var address=_this.props.address;var isValid=address.state!=='NJ'&&address.state!=='NY';_this.setState({hasValidTradeZone:isValid});return isValid;};var business_type=_this.props.business_type.type;if(business_type=='lodging')business_type='hotels /lodging';_this.state={statsLoaded:false,zipVariant:'light',tzVariant:'dark',zipDisabled:false,zipHeader:\"Zip - \"+_this.props.address.zip,accordianKeys:{zip:['0','0','0','0'],tradeZone:['0','0','0','0']},showModal:false,business_type:business_type.replace(/_/g,' '),hasValidTradeZone:false};return _this;}_createClass(DemographicsPanel,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.getZip();this.loadNewTradeZoneStats();case 2:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"onUpdateBusinessType\",value:function onUpdateBusinessType(business_type){this.props.onUpdateBusinessType(business_type);}},{key:\"render\",value:function render(){var _this2=this;var hasValidTradeZone=this.state.hasValidTradeZone;var social_data={summary:{gender:{}},race:{},nativity:{},education:{},marital_status:{},employment:{},transportation:{}};var income_data={};var age_data={};if(this.props.data_range==ZIP){if(this.state.zipStats!=null){social_data=this.state.zipStats.social;income_data=this.state.zipStats.income;age_data=this.state.zipStats.age;}}else if(this.props.data_range==TRADE_ZONE){if(this.state.tradeZoneStats!=null){social_data=this.state.tradeZoneStats.social;income_data=this.state.tradeZoneStats.income;age_data=this.state.tradeZoneStats.age;}}var NestedCard=function NestedCard(_ref3){var name=_ref3.name,data=_ref3.data,key_i=_ref3.key_i;var total=0;Object.entries(data).forEach(function(_ref4){var _ref5=_slicedToArray(_ref4,2),k=_ref5[0],v=_ref5[1];if(k.toLowerCase().search('total')<=-1&&k.toLowerCase().search('median')<=-1)total+=v;});return/*#__PURE__*/_jsxs(Card,{style:{backgroundColor:lightBg},children:[/*#__PURE__*/_jsx(Accordion.Toggle,{as:Card.Header,eventKey:key_i,style:{color:'whitesmoke',backgroundColor:darkBg,margin:'3px',fontWeight:'bold'},children:name}),/*#__PURE__*/_jsx(Accordion.Collapse,{eventKey:key_i,children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\",width:\"100%\"},children:/*#__PURE__*/_jsx(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(data).map(function(data,i){var entry=data[0].replace(/_/g,' ');var output=getPercent(data[1],total);if(entry.toLowerCase().search('total')>-1||entry.toLowerCase().search('median')>-1)output=formatCommas(data[1]);return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:capitalize(entry)}),/*#__PURE__*/_jsx(\"td\",{children:output})]},i);})})})})})})]});};var business_type=this.props.business_type.type.replace(/_/g,' ');if(business_type=='lodging')business_type='hotel /lodging';return/*#__PURE__*/_jsxs(\"div\",{className:\"demographics_container\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',width:'100%'},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'whitesmoke'},children:\"Demographics\"}),/*#__PURE__*/_jsx(InfoButton,{clickFunction:function clickFunction(){return _this2.setModalShow(true);}}),/*#__PURE__*/_jsx(MyVerticallyCenteredModal,{show:this.state.showModal,onHide:function onHide(){return _this2.setState({showModal:false});}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'35px',width:'100%'},children:[/*#__PURE__*/_jsx(Button,{disabled:this.state.zipDisabled,variant:this.state.zipVariant,className:\"map-control_button\",onClick:this.onUpdateDataRange,value:'zip',style:{width:'50%',height:35,padding:'0',fontWeight:'bold'},children:this.state.zipHeader}),/*#__PURE__*/_jsx(LoadingButton,{click:this.onUpdateDataRange,buffer:this.checkForTradeZone,buttonVariant:this.state.tzVariant,hasValidTradeZone:this.state.hasValidTradeZone})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:'auto',backgroundColor:lightBg},children:/*#__PURE__*/_jsxs(Accordion,{defaultActiveKey:\"0\",children:[/*#__PURE__*/_jsxs(Card,{style:{backgroundColor:lightBg},children:[/*#__PURE__*/_jsx(Accordion.Toggle,{as:Card.Header,eventKey:\"0\",ref:function ref(_ref6){return _this2.accordion=_ref6;},style:{color:'whitesmoke',backgroundColor:darkBg,marginTop:'3px',fontWeight:'bold'},children:\"General\"}),/*#__PURE__*/_jsx(Accordion.Collapse,{eventKey:\"0\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:/*#__PURE__*/_jsxs(\"tbody\",{style:{overflowX:'auto'},children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Your Proposed Business Type\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,_defineProperty({style:{color:textPrimary}},\"style\",{color:textPrimary})),/*#__PURE__*/_jsx(Form.Control,{as:\"select\",name:\"business_type\",value:this.state.business_type,onChange:this.onBusinessFormChange,children:BUSINESS_TYPES.map(function(e,i){return/*#__PURE__*/_jsx(\"option\",{children:e.replace(/_/g,' ')},i);})})]})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"td\",{children:this.props.address.formatted})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Population\"}),/*#__PURE__*/_jsxs(\"td\",{children:[social_data.summary.population!=undefined&&formatCommas(social_data.summary.population),!hasValidTradeZone&&social_data.summary.population==undefined&&'loading...']})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Median Age\"}),/*#__PURE__*/_jsxs(\"td\",{children:[social_data.summary.median_age!=undefined&&social_data.summary.median_age+' yrs',!hasValidTradeZone&&social_data.summary.median_age==undefined&&'loading...']})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Median Household Income\"}),/*#__PURE__*/_jsxs(\"td\",{children:[income_data.median!=undefined&&'$'+formatCommas(income_data.median),!hasValidTradeZone&&income_data.median==undefined&&'loading...']})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Males\"}),/*#__PURE__*/_jsxs(\"td\",{children:[social_data.summary.gender.males!=undefined&&formatCommas(social_data.summary.gender.males),!hasValidTradeZone&&social_data.summary.gender.males==undefined&&'loading...']})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Females\"}),/*#__PURE__*/_jsxs(\"td\",{children:[social_data.summary.gender.females!=undefined&&formatCommas(social_data.summary.gender.females),!hasValidTradeZone&&social_data.summary.gender.females==undefined&&'loading...']})]})]})})})})]}),/*#__PURE__*/_jsxs(Card,{style:{backgroundColor:lightBg},children:[/*#__PURE__*/_jsx(Accordion.Toggle,{as:Card.Header,eventKey:this.state.accordianKeys[this.props.data_range.split(' ')[0]][1],style:{color:'whitesmoke',backgroundColor:darkBg,marginTop:'3px',fontWeight:'bold'},children:\"Social\"}),/*#__PURE__*/_jsx(Accordion.Collapse,{eventKey:\"1\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Accordion,{defaultActiveKey:\"0\",children:[!(this.props.data_range==TRADE_ZONE&&this.state.isnyc)&&/*#__PURE__*/_jsx(NestedCard,{name:\"Ethnicity\",data:social_data.race,key_i:\"0\"}),!(this.props.data_range==TRADE_ZONE&&this.state.isnyc)&&/*#__PURE__*/_jsx(NestedCard,{name:\"Nativity\",data:social_data.nativity,key_i:\"1\"}),!(this.props.data_range==TRADE_ZONE&&this.state.isnyc)&&/*#__PURE__*/_jsx(NestedCard,{name:\"Education (Ages 25+)\",data:social_data.education,key_i:\"2\"}),/*#__PURE__*/_jsx(NestedCard,{name:\"Marital Status\",data:social_data.marital_status,key_i:\"3\"}),!(this.props.data_range==TRADE_ZONE)&&/*#__PURE__*/_jsx(NestedCard,{name:\"Transportation (for work)\",data:social_data.transportation,key_i:\"4\"})]})})})]}),/*#__PURE__*/_jsxs(Card,{style:{backgroundColor:lightBg},children:[/*#__PURE__*/_jsx(Accordion.Toggle,{as:Card.Header,eventKey:this.state.accordianKeys[this.props.data_range.split(' ')[0]][2],style:{color:'whitesmoke',background:darkBg,fontWeight:'bold'},children:\"Household Income\"}),/*#__PURE__*/_jsx(Accordion.Collapse,{eventKey:\"2\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Sample total\"}),/*#__PURE__*/_jsx(\"td\",{children:formatCommas(income_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Median Household Income\"}),/*#__PURE__*/_jsx(\"td\",{children:'$'+formatCommas(income_data.median)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"0-35k\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(income_data._0_9999+income_data._10000_14999+income_data._15000_19999+income_data._20000_24999+income_data._25000_29999+income_data._30000_34999,income_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"35-50k\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(income_data._35000_39999+income_data._40000_44999+income_data._45000_49999,income_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"50-75k\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(income_data._50000_59999+income_data._60000_74999,income_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"75-100k\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(income_data._75000_99999,income_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"100-150k\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(income_data._100000_124999+income_data._125000_149999,income_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"150-200k\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(income_data._150000_199999,income_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"200k+\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(income_data._200000_MORE,income_data.sample_total)})]})]})})})})]}),/*#__PURE__*/_jsxs(Card,{style:{backgroundColor:lightBg},children:[/*#__PURE__*/_jsx(Accordion.Toggle,{as:Card.Header,eventKey:this.state.accordianKeys[this.props.data_range.split(' ')[0]][3],style:{color:'whitesmoke',background:darkBg,fontWeight:'bold'},children:\"Age\"}),/*#__PURE__*/_jsx(Accordion.Collapse,{eventKey:\"3\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Median\"}),/*#__PURE__*/_jsx(\"td\",{children:age_data.median_age+' yrs'})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Sample Total\"}),/*#__PURE__*/_jsx(\"td\",{children:formatCommas(age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"0-9yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.ZERO_FIVE+age_data.FIVE_NINE,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"10-19yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.TEN_FOURTEEN+age_data.FIFTEEN_SEVENTEEN+age_data.EIGHTEEN_NINETEEN,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"20-29yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.TWENTY+age_data.TWENTYONE+age_data.TWENTYTWO_TWENTYFOUR+age_data.TWENTYFIVE_TWENTYNINE,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"30-39yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.THIRTY_THIRTYFOUR+age_data.THIRTYFIVE_THIRTYNINE,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"40-49yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.FORTY_FORTYFOUR+age_data.FORTYFIVE_FORTYNINE,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"50-59yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.FIFTY_FIFTYFOUR+age_data.FIFTYFIVE_FIFTYNINE,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"60-69yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.SIXTY_SIXTYONE+age_data.SIXTYTWO_SIXTYFOUR+age_data.SIXTYFIVE_SIXTYSIX+age_data.SIXTYSEVEN_SIXTYNINE,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"70-79yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.SEVENTY_SEVENTYFOUR+age_data.SEVENTYFIVE_SEVENTYNINE,age_data.sample_total)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"80+yrs\"}),/*#__PURE__*/_jsx(\"td\",{children:getPercent(age_data.EIGHTY_EIGHTYFOUR+age_data.EIGHTYFIVE_UP,age_data.sample_total)})]})]})})})})]})]})})]});}}]);return DemographicsPanel;}(React.Component);var LoadingButton=function LoadingButton(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];useEffect(function(){if(isLoading){props.buffer().then(function(){setLoading(false);});}},[isLoading]);var handleClick=function handleClick(e){props.click(e);setLoading(true);};var label=isLoading?'Loading...':'Tradezone';if(props.hasValidTradeZone)label+=' Unavailable';return/*#__PURE__*/_jsx(Button,{style:{margin:'auto',width:'50%',height:35,padding:'0',fontWeight:'bold'},variant:props.buttonVariant,disabled:props.hasValidTradeZone,value:'tradeZone',onClick:!isLoading?handleClick:null,children:label});};var formatCommas=function formatCommas(value){if(value==undefined)return'';return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");};var getPercent=function getPercent(value,total){return(value/total*100).toFixed(1)+'%';};var capitalize=function capitalize(word){var split=word.split(' ');var capitalize=[];split.forEach(function(e){if(e=='or'||e=='or')capitalize.push(e);else capitalize.push(e.substring(0,1).toUpperCase()+e.substring(1,e.length));});return capitalize.join(' ');};var InfoButton=function InfoButton(props){var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),clicked=_useState4[0],setClicked=_useState4[1];var color='white';if(clicked){//   color = 'rgba(255,255,255,0.5'\n}else color='white';var style={color:color,marginRight:'0.4em'};return/*#__PURE__*/_jsx(AiOutlineInfoCircle,{size:20,onClick:function onClick(e){return[setClicked(!clicked),props.clickFunction()];},style:style});};var MyVerticallyCenteredModal=function MyVerticallyCenteredModal(props){return/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"Demographics\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'20px'},children:\"1. Zip Code and Tradezone\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginLeft:'1em'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\" Zip Codes \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:14},children:\"Zip codes may contain visible gaps, especially in urban areas. This will occurr in the special case of a designated zip code for a particular building or complex such as Penn Station or the Empire State Building. \"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\" Trade Zone \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:14},children:[\"The 'Trade Zone' is calculated by aggregating the set of census \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www2.census.gov/geo/pdfs/education/CensusTracts.pdf\",children:\"tracts \"}),\"that fall within a radius of 1 mile for 'driving' and 0.25 miles for 'walking.'\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:14},children:\"Note that results may vary if location is bordering areas not within the following locations: \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{style:{fontSize:14},children:\"New Jersey, the 5 boroughs of New York City, and Long Island\"}),\" \"]})]})]}),/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'20px'},children:\"2. Statistics\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginLeft:'1em'},children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:14},children:[\"Demographics statistics are calculated using the U.S. Census's \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www.census.gov/programs-surveys/acs\",children:\"2017 American Community Survey.\"}),\" \"]})})})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{onClick:props.onHide,children:\"Close\"})})]}));};var mapStateToProps=createSelector(/* for above\n         {this.income_data == undefined && <NestedCard name={\"Income\"} data={<Text>Loading..</Text>} key_i={\"2\"}></NestedCard>}\n                {this.income_data != undefined && <NestedCard name={\"Income\"} data={income_data} key_i={\"2\"}></NestedCard>}\n    */tractSelector,addressSelector,dataRangeSelector,tradeZoneBoundsSelector,statsSelector,isCitySelector,geoUnitSelector,businessTypeSelector,function(tract,address,data_range,tradeZone_bounds,stats,isCity,geo_unit,business_type){return{tract:tract,address:address,data_range:data_range,tradeZone_bounds:tradeZone_bounds,stats:stats,isCity:isCity,geo_unit:geo_unit,business_type:business_type};});var mapActionsToProps={onUpdateDataRange:updateDataRange,onUpdateTradeZoneBounds:updateTradeZoneBounds,onUpdateBusinessType:updateBusinessType,onUpdateStatsZip:updateStatsZip,onUpdateStatsTZ:updateStatsTradezone};export default connect(mapStateToProps,mapActionsToProps)(DemographicsPanel);/**\n *   <tr>\n                             <td>City</td><td>{ this.props.city}</td>\n                             </tr><tr>\n                             <td>Street</td><td>{this.props.street}</td>\n                             </tr>\n */","map":{"version":3,"names":["React","useState","useEffect","Table","Accordion","Form","updateBusinessType","BUSINESS_TYPES","Card","connect","createSelector","updateDataRange","updateStatsZip","updateStatsTradezone","isCitySelector","tractSelector","addressSelector","dataRangeSelector","tradeZoneBoundsSelector","statsSelector","geoUnitSelector","businessTypeSelector","Button","createTradeZoneStats","updateTradeZoneBounds","AiOutlineInfoCircle","getZipData","getTradezoneData","Modal","determineRadius","ZIP","TRADE_ZONE","darkBg","lightBg","textPrimary","DemographicsPanel","props","onUpdateDataRange","event","val","target","value","setState","zipVariant","tzVariant","onUpdateStatsZip","stats","onUpdateStatsTZ","getZip","address","state","zip","res","length","zipStats","accordianKeys","zipHeader","zipDisabled","loadNewTradeZoneStats","params","radius","isnyc","coords","lat","lng","tradeZoneStats","statsLoaded","hasValidTradeZone","tradeZone","checkForTradeZone","Promise","resolve","loop","setInterval","clearInterval","onUpdateTradeZoneBounds","tradeZone_bounds","setModalShow","flag","showModal","onBusinessFormChange","type","business_type","business","replace","priceLevel","onUpdateBusinessType","isValid","social_data","summary","gender","race","nativity","education","marital_status","employment","transportation","income_data","age_data","data_range","social","income","age","NestedCard","name","data","key_i","total","Object","entries","forEach","k","v","toLowerCase","search","backgroundColor","Header","color","margin","fontWeight","overflowX","width","map","i","entry","output","getPercent","formatCommas","capitalize","display","flexDirection","alignItems","justifyContent","height","padding","flex","overflowY","ref","accordion","marginTop","e","formatted","population","undefined","median_age","median","males","females","split","background","sample_total","_0_9999","_10000_14999","_15000_19999","_20000_24999","_25000_29999","_30000_34999","_35000_39999","_40000_44999","_45000_49999","_50000_59999","_60000_74999","_75000_99999","_100000_124999","_125000_149999","_150000_199999","_200000_MORE","ZERO_FIVE","FIVE_NINE","TEN_FOURTEEN","FIFTEEN_SEVENTEEN","EIGHTEEN_NINETEEN","TWENTY","TWENTYONE","TWENTYTWO_TWENTYFOUR","TWENTYFIVE_TWENTYNINE","THIRTY_THIRTYFOUR","THIRTYFIVE_THIRTYNINE","FORTY_FORTYFOUR","FORTYFIVE_FORTYNINE","FIFTY_FIFTYFOUR","FIFTYFIVE_FIFTYNINE","SIXTY_SIXTYONE","SIXTYTWO_SIXTYFOUR","SIXTYFIVE_SIXTYSIX","SIXTYSEVEN_SIXTYNINE","SEVENTY_SEVENTYFOUR","SEVENTYFIVE_SEVENTYNINE","EIGHTY_EIGHTYFOUR","EIGHTYFIVE_UP","Component","LoadingButton","isLoading","setLoading","buffer","then","handleClick","click","label","buttonVariant","toString","toFixed","word","push","substring","toUpperCase","join","InfoButton","clicked","setClicked","style","marginRight","clickFunction","MyVerticallyCenteredModal","fontSize","marginLeft","onHide","mapStateToProps","tract","isCity","geo_unit","mapActionsToProps"],"sources":["/Users/sumanthvarma/Desktop/frontend/src/Components/Map/Panels/DemographicsPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Table from 'react-bootstrap/Table'\nimport Accordion from 'react-bootstrap/Accordion'\nimport Form from 'react-bootstrap/Form'\nimport { updateBusinessType} from '../../../Actions/business-actions'\nimport { BUSINESS_TYPES } from '../../../Constants'\nimport Card from 'react-bootstrap/Card'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect';\nimport { updateDataRange } from '../../../Actions/dataRange-actions'\nimport { updateStatsZip, updateStatsTradezone } from '../../../Actions/stats-actions'\nimport { isCitySelector, tractSelector, addressSelector, dataRangeSelector, tradeZoneBoundsSelector, statsSelector, geoUnitSelector, businessTypeSelector } from '../../../Reducers/selectors';\nimport Button from 'react-bootstrap/Button'\nimport { createTradeZoneStats } from '../../../Requests/locations-requests'\nimport { updateTradeZoneBounds } from '../../../Actions/tradeZoneBoundaries-actions'\nimport {AiOutlineInfoCircle} from 'react-icons/ai'\nimport { getZipData, getTradezoneData } from '../../../Requests/tradezones-requests';\nimport Modal from 'react-bootstrap/Modal'\nimport { determineRadius } from '../../utils/distance';\n\nexport const ZIP = 'zip code tabulation area'\nexport const TRADE_ZONE = 'tradeZone'\nconst darkBg = 'rgb(26,28,41)'\nconst lightBg = 'rgb(31,33,48)'\nconst textPrimary = 'whitesmoke'\n\nclass DemographicsPanel extends React.Component {\n    constructor(props) {\n        super(props) \n\n        // reconcile state display and backend business type encoding\n        let business_type = this.props.business_type.type\n        if (business_type == 'lodging') business_type = 'hotels /lodging'\n\n        this.state = {\n            statsLoaded : false,\n            zipVariant : 'light',\n            tzVariant : 'dark',\n            zipDisabled : false,\n            zipHeader : \"Zip - \" + this.props.address.zip,\n            accordianKeys :  { zip :  ['0', '0', '0', '0'], tradeZone : ['0', '0', '0', '0']},\n            showModal : false,\n            business_type : business_type.replace(/_/g, ' '),\n            hasValidTradeZone: false \n         }\n    };\n\n    async componentDidMount() {\n        this.getZip()\n        this.loadNewTradeZoneStats()  \n    };\n\n   onUpdateDataRange = (event) =>  {\n    let val = event.target.value\n    if (val === 'zip') {\n        this.props.onUpdateDataRange(ZIP)\n        this.setState({ zipVariant: 'light', tzVariant: 'dark'})\n    }\n    else if (val == 'tradeZone') {\n        this.props.onUpdateDataRange(TRADE_ZONE)\n        this.setState({zipVariant: 'dark', tzVariant: 'light'})\n    }\n   };\n\n   onUpdateStatsZip = (stats) => {\n       updateStatsZip(stats)\n   };\n\n   onUpdateStatsTZ = (stats) => {\n    updateStatsTradezone(stats)\n};\n\n    getZip = async () => {\n       const { address } = this.props;\n       const { state, zip } = address;\n\n       const res = await getZipData(state, zip);\n       if (res.length >= 1) {\n            this.setState({ zipStats : res[0].stats, accordianKeys : {...this.state.accordianKeys, zip: ['0', '1', '2', '3']}})\n            this.props.onUpdateStatsZip(res[0])\n       } else {\n           this.setState({ zipHeader: 'Zip Unavailable', zipDisabled: true })\n        this.props.onUpdateDataRange(TRADE_ZONE)\n        this.setState({zipVariant: 'dark', tzVariant: 'light'})\n       }\n    };\n\n    loadNewTradeZoneStats = async () => {\n        const { address, stats } = this.props;\n        const params = determineRadius(address.zip)\n        const { radius, isnyc } = params;\n\n        this.setState({ isnyc });\n\n        const res = await getTradezoneData(address.state, address.zip, address.coords.lat, address.coords.lng, radius, isnyc);\n    \n        if (res.stats) {\n            // set internal state\n            this.setState({ tradeZoneStats : res.stats, statsLoaded : true, hasValidTradeZone: false, // wtf is this named that???\n                accordianKeys : {...this.state.accordianKeys, tradeZone: ['0', '1', '2', '3']}\n            })\n           this.props.onUpdateStatsTZ(res);\n        }\n    };\n\n    checkForTradeZone = () => {\n        return new Promise(resolve => {\n            if (this.state.tradeZoneStats == null) {\n                let loop = setInterval(()=> {\n                    if (this.state.tradeZoneStats != null) {\n                        clearInterval(loop)\n                        resolve()\n                    }\n                }, 100)\n             } else resolve()\n        })\n    };\n\n    onUpdateTradeZoneBounds = tradeZone_bounds => {\n        this.props.onUpdateTradeZoneBounds(tradeZone_bounds)\n    };\n\n    setModalShow = (flag) => {\n        this.setState({showModal: flag})\n    };\n\n    onBusinessFormChange = (event) => {\n        let type = event.target.value\n        this.setState({ business_type : type })\n\n        // for props\n        if (type == 'hotels /lodging') type = 'lodging'\n        let business = {\n            type: type.replace(/ /g, '_'),\n            priceLevel : 0\n        }\n\n        this.onUpdateBusinessType(business)\n    };\n\n    onUpdateBusinessType(business_type) {\n        this.props.onUpdateBusinessType(business_type)\n    };\n\n    hasValidTradeZone = () => {\n        const { address } = this.props\n        const isValid = address.state !== 'NJ' && address.state !== 'NY'\n        this.setState({ hasValidTradeZone : isValid })\n        return isValid;\n    };\n\n    render() {\n        const { hasValidTradeZone } = this.state\n\n        var social_data =  {\n            summary: {\n                gender : {},\n            },\n            \n            race : {},\n            nativity: {},\n            education : {},\n            marital_status : {},\n            employment : {},\n            transportation : {}\n        }\n        var income_data = {}\n        var age_data={}\n\n        if (this.props.data_range == ZIP) {\n            if (this.state.zipStats != null) {\n                social_data = this.state.zipStats.social\n                income_data = this.state.zipStats.income\n                age_data = this.state.zipStats.age\n            }\n        } else if (this.props.data_range == TRADE_ZONE) {\n            if (this.state.tradeZoneStats != null) {\n                social_data = this.state.tradeZoneStats.social\n                income_data = this.state.tradeZoneStats.income\n                age_data = this.state.tradeZoneStats.age\n            }\n        }\n\n        const NestedCard = ({name, data, key_i}) => {\n            let total = 0\n            Object.entries(data).forEach(([k,v]) => {\n                if (k.toLowerCase().search('total') <= -1 && k.toLowerCase().search('median') <= -1)\n                    total += v\n            })\n      \n            return (\n                <Card style={{backgroundColor: lightBg}}>\n                    <Accordion.Toggle as={Card.Header} eventKey={key_i} style={{color: 'whitesmoke', backgroundColor: darkBg, margin: '3px', fontWeight: 'bold'}}>\n                        {name}\n                        </Accordion.Toggle>\n                        <Accordion.Collapse eventKey={key_i} >\n                    <Card.Body>\n                        <div style={{overflowX: \"auto\", width: \"100%\"}}>\n                        <Table striped bordered hover variant=\"dark\" >\n                        <tbody>\n                            {\n                                Object.entries(data).map((data, i) => {\n                                let entry = data[0].replace(/_/g, ' ')\n\n                                let output = getPercent(data[1], total)\n                                if (entry.toLowerCase().search('total') > -1 || entry.toLowerCase().search('median') > -1) output = formatCommas(data[1])\n                                return (\n                                    <tr key={i}>\n                                        <td>{capitalize(entry)}</td><td>{output}</td>\n                                    </tr>\n                                );\n                                })}\n                        </tbody>\n                        </Table>\n                        </div>\n                    </Card.Body>\n                    </Accordion.Collapse>\n                </Card>\n            )\n        }\n        let business_type= this.props.business_type.type.replace(/_/g, ' ')\n        if (business_type == 'lodging') business_type = 'hotel /lodging'\n\n        return (\n           <div className=\"demographics_container\" >\n\n             <div style={{ display: 'flex', flexDirection: 'column', width: '100%'}}>\n                <br></br>\n                    <div style={{ display: 'flex',flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', }}>\n                        <p></p>\n                        <strong style={{color:'whitesmoke', }}>Demographics</strong>\n                        <InfoButton clickFunction={()=>this.setModalShow(true)}/>   \n                        <MyVerticallyCenteredModal\n                            show={this.state.showModal}\n                            onHide={() => this.setState({showModal:false})}\n                        />\n                    </div>\n                    <br></br>\n                <div style={{display: 'flex', height: '35px', width: '100%'}}>\n                  <Button disabled={this.state.zipDisabled} variant={this.state.zipVariant} className='map-control_button'  onClick={this.onUpdateDataRange} value= {'zip'} style={{ width: '50%', height: 35, padding: '0', fontWeight: 'bold'}}>\n                    {this.state.zipHeader}\n                </Button>\n                <LoadingButton click={this.onUpdateDataRange} buffer={this.checkForTradeZone} buttonVariant={this.state.tzVariant} hasValidTradeZone={this.state.hasValidTradeZone}/>\n                </div>\n            </div>\n           \n            <div style={{ flex: 1, overflowY: 'auto', backgroundColor: lightBg}}>\n               <Accordion defaultActiveKey='0'>\n                <Card style={{backgroundColor: lightBg}}>\n                    <Accordion.Toggle as={Card.Header} eventKey=\"0\" ref={ref => this.accordion = ref} style={{color: 'whitesmoke', backgroundColor: darkBg, marginTop: '3px', fontWeight: 'bold'}}>\n                    General\n                    </Accordion.Toggle>\n                    <Accordion.Collapse eventKey=\"0\" >\n                    <Card.Body>\n                        <Table striped bordered hover variant=\"dark\" >\n                        <tbody style={{overflowX: 'auto'}}>\n                            <tr>\n                            <td>Your Proposed Business Type</td>\n                            <td>\n                                <Form.Group>\n                                    <Form.Label style={{color: textPrimary}} style={{color: textPrimary}}></Form.Label>\n                                    <Form.Control as=\"select\" name=\"business_type\" value={this.state.business_type} onChange={this.onBusinessFormChange}>\n                                            {BUSINESS_TYPES.map((e,i) => {\n                                                return <option key={i}>{e.replace(/_/g, ' ')}</option>\n                                            })}\n                                    </Form.Control>\n                                </Form.Group>\n                            </td>\n                             </tr><tr>\n                             <td>Address</td><td>{ this.props.address.formatted}</td>\n                             </tr>\n                           <tr>\n                            <td>Population</td><td>{social_data.summary.population != undefined && formatCommas(social_data.summary.population)}\n                                {!hasValidTradeZone && social_data.summary.population == undefined && 'loading...'}\n                            </td>\n                                </tr><tr>\n                            <td>Median Age</td><td>{social_data.summary.median_age != undefined && social_data.summary.median_age + ' yrs'}\n                            {!hasValidTradeZone && social_data.summary.median_age == undefined && 'loading...'}\n                            </td>\n                                </tr><tr>\n                            <td>Median Household Income</td><td>{income_data.median != undefined && '$'+formatCommas(income_data.median)}\n                            {!hasValidTradeZone && income_data.median == undefined && 'loading...'}\n                            </td>\n                            </tr><tr>\n                            <td>Males</td><td>{social_data.summary.gender.males != undefined && formatCommas(social_data.summary.gender.males)}\n                            {!hasValidTradeZone && social_data.summary.gender.males == undefined && 'loading...'}\n                            </td>\n                             </tr><tr>\n                            <td>Females</td><td>{social_data.summary.gender.females != undefined && formatCommas(social_data.summary.gender.females)}\n                            {!hasValidTradeZone && social_data.summary.gender.females == undefined && 'loading...'}\n                            </td>\n                             </tr>\n                        </tbody>\n                        </Table>\n                    </Card.Body>\n                    </Accordion.Collapse>\n                </Card>\n                \n                <Card style={{backgroundColor: lightBg}}>\n                    <Accordion.Toggle as={Card.Header} eventKey={this.state.accordianKeys[this.props.data_range.split(' ')[0]][1]} style={{color: 'whitesmoke', backgroundColor: darkBg, marginTop: '3px', fontWeight: 'bold'}}>\n                    Social\n                    </Accordion.Toggle>\n                    <Accordion.Collapse eventKey=\"1\">\n                    <Card.Body>\n                        <Accordion defaultActiveKey=\"0\">\n                        { !(this.props.data_range == TRADE_ZONE && this.state.isnyc) &&  <NestedCard name={\"Ethnicity\"} data={social_data.race} key_i={\"0\"}></NestedCard> }\n                        { !(this.props.data_range == TRADE_ZONE && this.state.isnyc ) &&  <NestedCard name={\"Nativity\"} data={social_data.nativity} key_i={\"1\"}></NestedCard> }\n                        {!(this.props.data_range == TRADE_ZONE && this.state.isnyc)  && <NestedCard name={\"Education (Ages 25+)\"} data={social_data.education} key_i={\"2\"}></NestedCard> }\n                        <NestedCard name={\"Marital Status\"} data={social_data.marital_status} key_i={\"3\"}></NestedCard> \n                        { !(this.props.data_range == TRADE_ZONE) && <NestedCard name={\"Transportation (for work)\"} data={social_data.transportation} key_i={\"4\"}></NestedCard> }\n                        </Accordion>\n                    </Card.Body>\n                    </Accordion.Collapse>\n                </Card>\n                <Card style={{backgroundColor: lightBg}}>\n                    <Accordion.Toggle as={Card.Header} eventKey={this.state.accordianKeys[this.props.data_range.split(' ')[0]][2]}style={{color: 'whitesmoke', background: darkBg, fontWeight: 'bold'}}>\n                    Household Income\n                    </Accordion.Toggle>\n                    <Accordion.Collapse eventKey=\"2\" >\n                    <Card.Body>\n                        <Table striped bordered hover variant=\"dark\" >\n                        <tbody>\n                            <tr>\n                            <td>Sample total</td><td>{formatCommas(income_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>Median Household Income</td><td>{'$'+ formatCommas(income_data.median)}</td>\n                             </tr><tr>\n                             <td>0-35k</td><td>{getPercent(income_data._0_9999 + income_data._10000_14999 + income_data._15000_19999 + income_data._20000_24999 + income_data._25000_29999 + income_data._30000_34999, income_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>35-50k</td><td>{getPercent(income_data._35000_39999 + income_data._40000_44999 + income_data._45000_49999, income_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>50-75k</td><td>{getPercent(income_data._50000_59999 + income_data._60000_74999, income_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>75-100k</td><td>{getPercent(income_data._75000_99999, income_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>100-150k</td><td>{getPercent(income_data._100000_124999 + income_data._125000_149999, income_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>150-200k</td><td>{getPercent(income_data._150000_199999, income_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>200k+</td><td>{getPercent(income_data._200000_MORE, income_data.sample_total)}</td>\n                             </tr>\n                        </tbody>\n                        </Table>\n                    </Card.Body>\n                    </Accordion.Collapse>\n                </Card>\n                <Card style={{backgroundColor: lightBg}}>\n                    <Accordion.Toggle as={Card.Header} eventKey={this.state.accordianKeys[this.props.data_range.split(' ')[0]][3]} style={{color: 'whitesmoke', background: darkBg, fontWeight: 'bold'}}>\n                    Age\n                    </Accordion.Toggle>\n                    <Accordion.Collapse eventKey=\"3\" >\n                    <Card.Body>\n                        <Table striped bordered hover variant=\"dark\" >\n                        <tbody>\n                            <tr>\n                            <td>Median</td><td>{age_data.median_age + ' yrs'}</td>\n                             </tr><tr>\n                             <td>Sample Total</td><td>{formatCommas(age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>0-9yrs</td><td>{getPercent(age_data.ZERO_FIVE + age_data.FIVE_NINE, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>10-19yrs</td><td>{getPercent(age_data.TEN_FOURTEEN + age_data.FIFTEEN_SEVENTEEN + age_data.EIGHTEEN_NINETEEN, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>20-29yrs</td><td>{getPercent(age_data.TWENTY + age_data.TWENTYONE + age_data.TWENTYTWO_TWENTYFOUR + age_data.TWENTYFIVE_TWENTYNINE, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>30-39yrs</td><td>{getPercent(age_data.THIRTY_THIRTYFOUR + age_data.THIRTYFIVE_THIRTYNINE, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>40-49yrs</td><td>{getPercent(age_data.FORTY_FORTYFOUR + age_data.FORTYFIVE_FORTYNINE, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>50-59yrs</td><td>{getPercent(age_data.FIFTY_FIFTYFOUR + age_data.FIFTYFIVE_FIFTYNINE, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>60-69yrs</td><td>{getPercent(age_data.SIXTY_SIXTYONE + age_data.SIXTYTWO_SIXTYFOUR + age_data.SIXTYFIVE_SIXTYSIX + age_data.SIXTYSEVEN_SIXTYNINE, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>70-79yrs</td><td>{getPercent(age_data.SEVENTY_SEVENTYFOUR + age_data.SEVENTYFIVE_SEVENTYNINE, age_data.sample_total)}</td>\n                             </tr><tr>\n                             <td>80+yrs</td><td>{getPercent(age_data.EIGHTY_EIGHTYFOUR + age_data.EIGHTYFIVE_UP, age_data.sample_total)}</td>\n                             </tr>\n                        </tbody>\n                        </Table>\n                    </Card.Body>\n                    </Accordion.Collapse>\n                  \n                </Card>\n                </Accordion>\n              \n                </div>\n\n                \n           </div>\n        );\n    }\n}\n\nconst LoadingButton = (props) => {\n    const [isLoading, setLoading] = useState(false)\n    \n    useEffect(() => {\n      if (isLoading) {\n        props.buffer().then(() => {\n          setLoading(false);\n        });\n      }\n    }, [isLoading]);\n\n    const handleClick = (e) =>{\n        props.click(e)\n        setLoading(true); \n    }\n  \n    let label = (isLoading) ? 'Loading...' : 'Tradezone'\n    if (props.hasValidTradeZone) label += ' Unavailable'\n\n    return (\n      <Button\n        style={{margin: 'auto', width: '50%', height: 35, padding: '0', fontWeight: 'bold'}}\n        variant={props.buttonVariant}\n        disabled={props.hasValidTradeZone}\n        value = {'tradeZone'} \n        onClick={!isLoading ? handleClick : null}\n      >\n        {label}\n      </Button>\n    );\n  }\n\n  const formatCommas = (value) => {\n    if (value == undefined) return ''\n    return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n  }\n\n  const getPercent = (value, total) => {\n      return ((value/total) * 100).toFixed(1) + '%'\n  }\n\n  const capitalize = word => {\n      let split = word.split(' ')\n      let capitalize = []\n      split.forEach(e => {\n          if (e == 'or' || e == 'or')\n            capitalize.push(e)\n          else \n            capitalize.push(e.substring(0, 1).toUpperCase() + e.substring(1, e.length))\n      })\n      return capitalize.join(' ')\n  }\n\n  const InfoButton = (props) => {\n    const [clicked, setClicked] = useState(false)\n    let color = 'white'\n\n    if (clicked) {\n     //   color = 'rgba(255,255,255,0.5'\n    }\n    else color = 'white'\n    \n    let style = {color: color,  marginRight: '0.4em'}\n\n    return (\n         <AiOutlineInfoCircle size={20} onClick={(e)=> [setClicked(!clicked), props.clickFunction()]} \n         style={style}/>\n    ) \n}\n\n\n  const MyVerticallyCenteredModal = (props) => {\n    return (\n      <Modal\n        {...props}\n        size=\"lg\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-vcenter\">\n            Demographics\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n        <h3 style={{fontSize: '20px'}}>\n            1. Zip Code and Tradezone\n          </h3>\n          <p style={{ marginLeft: '1em'}}>\n              <p>\n              <strong> Zip Codes </strong>   \n              <br></br>\n              <span style={{ fontSize: 14}}>Zip codes may contain visible gaps, especially in urban areas. \n              This will occurr in the special case of a designated zip code for a particular building or \n              complex such as Penn Station or the Empire State Building. </span>\n              </p>\n              <p>\n              <strong> Trade Zone </strong>   \n              <br></br>\n              <span style={{ fontSize: 14}}>The 'Trade Zone' is calculated by aggregating the set of census <a href='https://www2.census.gov/geo/pdfs/education/CensusTracts.pdf'>tracts </a> \n                that fall within a radius of 1 mile for 'driving' and 0.25 miles for 'walking.'</span>\n                <br></br>\n                <span style={{ fontSize: 14}}>Note that results may vary if location is bordering areas not within the following locations: </span>\n                <br></br>\n                <span><strong style={{ fontSize: 14}}>New Jersey, the 5 boroughs of New York City, and Long Island</strong> </span> \n              </p>\n          </p>\n          <h3 style={{fontSize: '20px'}}>\n            2. Statistics\n          </h3>\n          <p style={{ marginLeft: '1em'}}>\n              <p>\n              <span style={{ fontSize: 14}}>Demographics statistics are calculated using the U.S. Census's <a href='https://www.census.gov/programs-surveys/acs'>2017 American Community Survey.</a> </span>\n              </p>\n          </p>\n      \n        </Modal.Body>\n        <Modal.Footer>\n          <Button onClick={props.onHide}>Close</Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n\n\nconst mapStateToProps = createSelector(\n    /* for above\n         {this.income_data == undefined && <NestedCard name={\"Income\"} data={<Text>Loading..</Text>} key_i={\"2\"}></NestedCard>}\n                {this.income_data != undefined && <NestedCard name={\"Income\"} data={income_data} key_i={\"2\"}></NestedCard>}\n    */\n    tractSelector,\n    addressSelector,\n    dataRangeSelector,\n    tradeZoneBoundsSelector,\n    statsSelector,\n    isCitySelector,\n    geoUnitSelector,\n    businessTypeSelector,\n\n    (tract, address, data_range, tradeZone_bounds, stats, isCity, geo_unit, business_type) => ({\n        tract, address, data_range, tradeZone_bounds, stats, isCity, geo_unit, business_type\n    })\n);\n\nconst mapActionsToProps = {\n    onUpdateDataRange: updateDataRange,\n    onUpdateTradeZoneBounds: updateTradeZoneBounds,\n    onUpdateBusinessType : updateBusinessType,\n    onUpdateStatsZip: updateStatsZip,\n    onUpdateStatsTZ: updateStatsTradezone\n};\n\nexport default connect(mapStateToProps, mapActionsToProps) (DemographicsPanel);\n\n\n/**\n *   <tr>\n                             <td>City</td><td>{ this.props.city}</td>\n                             </tr><tr>\n                             <td>Street</td><td>{this.props.street}</td>\n                             </tr>\n */"],"mappings":"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"},"metadata":{},"sourceType":"module"}