{"ast":null,"code":"import _readOnlyError from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/readOnlyError.js\";import _regeneratorRuntime from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{connect}from'react-redux';import{createSelector}from'reselect';import*as selectors from'../../Reducers/selectors';import Button from'react-bootstrap/Button';import RecentSearches from'./RecentSearches';import MyListings from'./MyListings';import UserProfile from'./UserProfile';import{getListingByUserId}from'../../Requests/listings-requests';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.handleChange=function(e){_this.setState({body:e.target.value});};_this.handleDeleteListing=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var listings;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:listings=_this.state.listings.filter(function(listing){return listing.listingId!=id;});_context.next=3;return _this.setState({listings:listings});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={searches:[],body:'',index:0,listings:[],loadingListings:true,user_id:''};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var user_id,searches,user,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:user_id=this.props.user._id;searches=localStorage.getItem('recentSearches');if(searches!==null){this.setState({searches:JSON.parse(searches)});}//check if userid set in props, if not look in local storage\nif(!(user_id===undefined)){_context2.next=10;break;}user=localStorage.getItem('user');if(!(user!==undefined)){_context2.next=9;break;}JSON.parse(user)._id,_readOnlyError(\"user_id\");_context2.next=10;break;case 9:return _context2.abrupt(\"return\");case 10:this.setState({user_id:user_id});_context2.next=13;return getListingByUserId(user_id);case 13:res=_context2.sent;console.log('userID',user_id,res);this.setState({listings:res,loadingListings:false});case 16:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"profilePageContainer\",children:[/*#__PURE__*/_jsx(UserProfile,{user:this.props.user,user_id:this.state.user_id}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileItemsContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tabsContainer\",children:[/*#__PURE__*/_jsx(Button,{className:\"tabButton\",style:{fontWeight:this.state.index==0?'bold':'normal'},variant:this.state.index==0?\"primary\":\"secondary\",onClick:function onClick(){return _this2.setState({index:0});},children:\"Recent Searches\"}),/*#__PURE__*/_jsx(Button,{className:\"tabButton\",style:{fontWeight:this.state.index==1?'bold':'normal'},variant:this.state.index==1?\"primary\":\"secondary\",onClick:function onClick(){return _this2.setState({index:1});},children:\"My Listings\"})]}),this.state.index==0&&/*#__PURE__*/_jsx(RecentSearches,{}),this.state.index==1&&/*#__PURE__*/_jsx(MyListings,{listings:this.state.listings,loading:this.state.loadingListings,handleDeleteListing:this.handleDeleteListing})]})]});}}]);return Profile;}(React.Component);var mapStateToProps=createSelector(selectors.addressSelector,selectors.userSelector,function(address,user){return{address:address,user:user};});export default connect(mapStateToProps)(Profile);","map":{"version":3,"names":["React","connect","createSelector","selectors","Button","RecentSearches","MyListings","UserProfile","getListingByUserId","Profile","props","handleChange","e","setState","body","target","value","handleDeleteListing","id","listings","state","filter","listing","listingId","searches","index","loadingListings","user_id","user","_id","localStorage","getItem","JSON","parse","undefined","res","console","log","fontWeight","Component","mapStateToProps","addressSelector","userSelector","address"],"sources":["/Users/sumanthvarma/Desktop/frontend/src/Components/Profile/index.js"],"sourcesContent":["import React  from 'react'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect';\nimport * as selectors from '../../Reducers/selectors'\nimport Button from 'react-bootstrap/Button'\nimport RecentSearches from './RecentSearches';\nimport MyListings from './MyListings'\nimport UserProfile from './UserProfile'\nimport { getListingByUserId } from '../../Requests/listings-requests'\n\nclass Profile extends React.Component {\n\n    constructor(props) {\n        super(props)\n       \n        this.state = {\n            searches: [],\n            body: '',\n            index : 0,\n            listings: [],\n            loadingListings : true,\n            user_id : ''\n        }\n    }\n\n    async componentDidMount() {\n        const user_id = this.props.user._id\n        const searches = localStorage.getItem('recentSearches')\n        if (searches !== null) {\n            this.setState({ searches : JSON.parse(searches)})\n        }\n \n        //check if userid set in props, if not look in local storage\n        if (user_id === undefined) {\n            let user = localStorage.getItem('user')\n\n            if (user !== undefined) {\n                user_id = JSON.parse(user)._id\n            }\n            else return;\n        }\n\n        this.setState({ user_id : user_id})\n        let res = await getListingByUserId(user_id)\n        console.log('userID', user_id, res)\n        this.setState({ listings : res, loadingListings : false })\n\n    }    \n\n    handleChange = e => {\n        this.setState({body: e.target.value})\n    }\n\n    handleDeleteListing = async (id) => {\n\n        let listings = this.state.listings.filter((listing) => {\n            return listing.listingId != id\n        })\n\n        await this.setState({ listings : listings })\n    }\n\n    render() {\n    \n        return (\n            <div className=\"profilePageContainer\">\n                 <UserProfile user={this.props.user} user_id={this.state.user_id}/>\n                 <div className=\"profileItemsContainer\">\n                     <div className=\"tabsContainer\">\n                        <Button className=\"tabButton\" style={{ fontWeight: (this.state.index == 0) ? 'bold' : 'normal'}} \n                        variant={(this.state.index == 0) ? \"primary\" : \"secondary\"} onClick={() => this.setState({ index : 0})}>Recent Searches</Button>\n\n                        <Button className=\"tabButton\" style={{ fontWeight: (this.state.index == 1) ? 'bold' : 'normal'}}\n                         variant={(this.state.index == 1) ? \"primary\" : \"secondary\"} onClick={() => this.setState({ index : 1})}>My Listings</Button>\n                     </div>\n                        {this.state.index == 0 && <RecentSearches/>}\n                        {this.state.index == 1 && <MyListings listings={this.state.listings} loading={this.state.loadingListings} handleDeleteListing={this.handleDeleteListing}/>}\n                 </div>\n            </div>\n       )\n    }\n }\n\n \n const mapStateToProps = createSelector(\n     selectors.addressSelector,\n     selectors.userSelector,\n    (address, user) => ({\n        address, user \n    })\n )\n\n\n export default connect(mapStateToProps)(Profile)"],"mappings":"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"},"metadata":{},"sourceType":"module"}