{"ast":null,"code":"var _jsxFileName = \"/Users/sumanthvarma/Desktop/frontend/src/Components/Listings/ListingView/index.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport * as selectors from '../../../Reducers/selectors';\nimport { Link, withRouter } from 'react-router-dom';\nimport { getListingById } from '../../../Requests/listings-requests';\nimport Table from 'react-bootstrap/Table';\nimport GridLoader from \"../../UI/GridLoader\";\nimport Slideshow from \"../../UI/Slideshow\";\nimport { GOOGLE_KEY, S3_BASE } from \"../../../Constants\";\nimport GoogleMapReact from 'google-map-react';\nimport { renderMarker, BLUE_MARKER } from \"../../Map/GoogleMaps/GoogleMapComponents\";\nimport Image from 'react-bootstrap/Image';\nimport PublishedStatus from '../PublishStatus';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMapMarkedAlt } from '@fortawesome/free-solid-svg-icons';\nimport MediaQuery from 'react-responsive';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst lightBg = 'rgb(31,33,48)';\n\nclass ListingView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setLocation = location => {\n      this.setState({\n        location: location\n      });\n      this.addFormInfo(location, 'location');\n      this.handleNext();\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        body: e.target.value\n      });\n    };\n\n    this.handleTabPress = index => {\n      this.setState({\n        index: index\n      });\n    };\n\n    this.addFormInfo = (data, category) => {\n      this.setState({\n        formData: { ...this.state.formData,\n          [category]: data\n        }\n      });\n    };\n\n    this.handleNext = () => {\n      this.setState({\n        index: this.state.index + 1\n      });\n      window.scrollTo(0, 0);\n    };\n\n    this.handleSetPhotos = (category, photos) => {\n      let photosState = this.state.photos;\n      let removals = [];\n\n      for (let i = 0; i < photosState[category].length; i++) {\n        for (let j = 0; j < photos.length; j++) {\n          if (photosState[category][i].name == photos[j].name) {\n            removals.push(j);\n            break;\n          }\n        }\n      }\n\n      for (let i = 0; i < removals.length; i++) {\n        photos.splice(removals[i], 1);\n      }\n\n      photosState[category] = photosState[category].concat(photos);\n      this.setState({\n        photos: photosState\n      });\n    };\n\n    this.removePhoto = (category, index) => {\n      let photosState = this.state.photos;\n      photosState[category].splice(index, 1);\n      this.setState({\n        photos: photosState,\n        [category + '_key']: this.state[category + '_key'] * -1\n      });\n    };\n\n    this.apiIsLoaded = (map, maps, center) => {\n      this.state.map = map;\n      renderMarker('your_business', center, map, 'Your Business', BLUE_MARKER);\n    };\n\n    this.getMapOptions = maps => {\n      return {\n        streetViewControl: false,\n        scaleControl: true,\n        fullscreenControl: false,\n        styles: [{\n          featureType: \"poi.business\",\n          elementType: \"labels\",\n          stylers: [{\n            visibility: \"off\"\n          }]\n        }],\n        gestureHandling: \"greedy\",\n        disableDoubleClickZoom: true,\n        minZoom: 11,\n        maxZoom: 18,\n        mapTypeControl: true,\n        mapTypeId: maps.MapTypeId.ROADMAP,\n        mapTypeControlOptions: {\n          style: maps.MapTypeControlStyle.HORIZONTAL_BAR,\n          position: maps.ControlPosition.BOTTOM_CENTER,\n          mapTypeIds: [maps.MapTypeId.ROADMAP, maps.MapTypeId.SATELLITE, maps.MapTypeId.HYBRID]\n        },\n        zoomControl: true,\n        clickableIcons: false\n      };\n    };\n\n    this.getUrl = () => {\n      this.props.history.push('/\"' + encodeURI(this.state.listingData.location.formatted) + '\"/none');\n    };\n\n    this.state = {\n      unauthorized: false\n    };\n  }\n\n  async componentDidMount() {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    }); // get listing info from url params\n\n    if (this.props.urlParams) {\n      if (this.props.urlParams.listingId != undefined) {\n        let listing = await getListingById(this.props.urlParams.listingId);\n\n        if (listing.length > 0) {\n          this.setState({\n            listingData: listing[0]\n          }); // check ownership\n\n          if (!listing[0].published && listing[0].user_id !== this.props.user._id) {\n            this.setState({\n              unauthorized: true\n            });\n          }\n        }\n      }\n    }\n  }\n\n  render() {\n    var _this$state$listingDa, _this$state$listingDa2, _data$photos, _data$photos2;\n\n    let data = this.state.listingData;\n    const {\n      unauthorized\n    } = this.state;\n\n    if (unauthorized) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"warningPage\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Sorry, this listing is not yet published\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this);\n    }\n\n    {\n      /* <div style={{ display: 'flex', flex: 1}}>\n                     <Link style={{  color: 'black', fontSize: '18px', fontWeight: 'bold'}} onClick={this.getUrl}>\n                         <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', color: 'white'}}>\n                             <FontAwesomeIcon icon={faMapMarkedAlt} size=\"3x\" color=\"rgb(1,100,182\" style={{ marginBottom: '0.25em'}}/>\n                             Go to map view\n                         </div>\n                     </Link>\n                 </div> */\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"listingPage\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"listingLoadingContainer\",\n        style: this.state.listingData == undefined ? {} : {\n          display: 'none'\n        },\n        children: this.state.listingData == undefined && /*#__PURE__*/_jsxDEV(GridLoader, {\n          color: \"#0892d0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }, this), this.state.listingData != undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"listingContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listingHeader\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flex: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"listingAddressText\",\n              children: this.state.listingData.location.formatted\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flex: 1,\n              justifyContent: 'flex-end',\n              paddingRight: '1.5em'\n            },\n            children: /*#__PURE__*/_jsxDEV(PublishedStatus, {\n              published: this.state.listingData.published,\n              size: \"2x\",\n              fontColor: \"white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(MediaQuery, {\n          minDeviceWidth: 551,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"listingMediaContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"listingMapContainer\",\n              style: {\n                height: '400px',\n                width: '39.25%'\n              },\n              children: /*#__PURE__*/_jsxDEV(GoogleMapReact, {\n                bootstrapURLKeys: {\n                  key: GOOGLE_KEY\n                },\n                defaultCenter: this.state.listingData.location.coords,\n                defaultZoom: 17,\n                yesIWantToUseGoogleMapApiInternals: true,\n                layerTypes: ['TrafficLayer', 'TransitLayer'],\n                id: 'map_list_view',\n                onGoogleApiLoaded: _ref => {\n                  let {\n                    map,\n                    maps\n                  } = _ref;\n                  return this.apiIsLoaded(map, maps, this.state.listingData.location.coords);\n                },\n                options: this.getMapOptions\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Slideshow, {\n              width: '60%',\n              height: '400px',\n              photos: (_this$state$listingDa = this.state.listingData.photos) === null || _this$state$listingDa === void 0 ? void 0 : _this$state$listingDa.cover_photos.concat(this.state.listingData.photos.site_photos)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(MediaQuery, {\n          maxDeviceWidth: 551,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"listingMediaContainer\",\n            children: [/*#__PURE__*/_jsxDEV(Slideshow, {\n              width: '100%',\n              height: '400px',\n              photos: (_this$state$listingDa2 = this.state.listingData.photos) === null || _this$state$listingDa2 === void 0 ? void 0 : _this$state$listingDa2.cover_photos.concat(this.state.listingData.photos.site_photos)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"listingMapContainer\",\n              style: {\n                height: '200px',\n                width: '100%'\n              },\n              children: /*#__PURE__*/_jsxDEV(GoogleMapReact, {\n                bootstrapURLKeys: {\n                  key: GOOGLE_KEY\n                },\n                defaultCenter: this.state.listingData.location.coords,\n                defaultZoom: 17,\n                yesIWantToUseGoogleMapApiInternals: true,\n                layerTypes: ['TrafficLayer', 'TransitLayer'],\n                id: 'map_list_view',\n                onGoogleApiLoaded: _ref2 => {\n                  let {\n                    map,\n                    maps\n                  } = _ref2;\n                  return this.apiIsLoaded(map, maps, this.state.listingData.location.coords);\n                },\n                options: this.getMapOptions\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listingViewBottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '65%',\n              margin: '2.5%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"listingTableHeader\",\n              style: {\n                color: 'white'\n              },\n              children: \"Listing Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              className: \"listingDataTable\",\n              striped: true,\n              bordered: true,\n              hover: true,\n              variant: \"light\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"Address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"tableValue\",\n                    children: data.location.formatted\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"Asking price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"tableValue\",\n                    children: data.pricingInfo.askingPrice != undefined ? `$ ${data.pricingInfo.askingPrice}` : \"Unavailable\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"For Sale?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"tableValue\",\n                    children: capitalizeFirst(data.contactInfo.forSale)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: \"For Lease?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"tableValue\",\n                    children: capitalizeFirst(data.contactInfo.forLease)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"listingTableHeader\",\n              style: {\n                color: 'white'\n              },\n              children: \"Location Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 33\n            }, this), Object.entries(data.locationDetails).length == 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: 'white',\n                textAlign: 'left'\n              },\n              children: \"This information is unavailable or has not been provided yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 86\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              className: \"listingDataTable\",\n              striped: true,\n              bordered: true,\n              hover: true,\n              variant: \"light\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: Object.entries(data.locationDetails).map((_ref3, i) => {\n                  let [key, value] = _ref3;\n\n                  // C/O\n                  if (key == \"hasOccupancyCert\") {\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: \"Has CO\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 261,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"tableValue\",\n                        children: capitalizeFirst(value)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 262,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 260,\n                      columnNumber: 57\n                    }, this);\n                  } // ingress\n\n\n                  if (key == \"ingressInfo\") {\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: \"Means of Ingress/Egress\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"tableValue\",\n                        children: capitalizeFirst(value)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 272,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 57\n                    }, this);\n                  }\n\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatKeys(key)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 279,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"tableValue\",\n                      children: capitalizeFirst(value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 280,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 53\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"listingTableHeader\",\n              style: {\n                color: 'white'\n              },\n              children: \"Pricing Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 33\n            }, this), Object.entries(data.pricingInfo).length == 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: 'white',\n                textAlign: 'left'\n              },\n              children: \"This information is unavailable or has not been provided yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 82\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              className: \"listingDataTable\",\n              striped: true,\n              bordered: true,\n              hover: true,\n              variant: \"light\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: Object.entries(data.pricingInfo).map((_ref4, i) => {\n                  let [key, value] = _ref4;\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: formatKeys(key)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 295,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"tableValue\",\n                      children: key.indexOf('Price') > -1 || key.indexOf('Cost') > -1 ? '$' + capitalizeFirst(value) : capitalizeFirst(value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 53\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"contact_info_panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Contact Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 33\n            }, this), ((_data$photos = data.photos) === null || _data$photos === void 0 ? void 0 : _data$photos.contact_photos.length) > 0 && /*#__PURE__*/_jsxDEV(Image, {\n              src: S3_BASE + ((_data$photos2 = data.photos) === null || _data$photos2 === void 0 ? void 0 : _data$photos2.contact_photos[0]),\n              className: \"contactPhoto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                marginTop: '0.5em',\n                marginBottom: '0.5em',\n                fontWeight: 'bold',\n                color: 'white'\n              },\n              children: data.contactInfo.relationship != 'other' ? capitalizeFirst(data.contactInfo.relationship) : 'Other (non broker/landlord)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: '0.5em'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  color: 'white'\n                },\n                children: data.contactInfo.ownershipDetails\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = createSelector(selectors.addressSelector, selectors.userSelector, (address, user) => ({\n  address,\n  user\n}));\n\nconst capitalizeFirst = value => {\n  return value ? value.substring(0, 1).toUpperCase() + value.substring(1, value.length) : '';\n};\n\nconst formatKeys = value => {\n  let formatted = \"\";\n\n  for (let i = 0; i < value.length; i++) {\n    let char = value.substring(i, i + 1);\n\n    if (i == 0) {\n      formatted += char.toUpperCase();\n      continue;\n    }\n\n    if (char == char.toUpperCase()) {\n      formatted += \" \" + char;\n      continue;\n    }\n\n    formatted += char;\n  }\n\n  return formatted;\n};\n\nexport default withRouter(connect(mapStateToProps)(ListingView));","map":{"version":3,"names":["React","connect","createSelector","selectors","Link","withRouter","getListingById","Table","GridLoader","Slideshow","GOOGLE_KEY","S3_BASE","GoogleMapReact","renderMarker","BLUE_MARKER","Image","PublishedStatus","FontAwesomeIcon","faMapMarkedAlt","MediaQuery","lightBg","ListingView","Component","constructor","props","setLocation","location","setState","addFormInfo","handleNext","handleChange","e","body","target","value","handleTabPress","index","data","category","formData","state","window","scrollTo","handleSetPhotos","photos","photosState","removals","i","length","j","name","push","splice","concat","removePhoto","apiIsLoaded","map","maps","center","getMapOptions","streetViewControl","scaleControl","fullscreenControl","styles","featureType","elementType","stylers","visibility","gestureHandling","disableDoubleClickZoom","minZoom","maxZoom","mapTypeControl","mapTypeId","MapTypeId","ROADMAP","mapTypeControlOptions","style","MapTypeControlStyle","HORIZONTAL_BAR","position","ControlPosition","BOTTOM_CENTER","mapTypeIds","SATELLITE","HYBRID","zoomControl","clickableIcons","getUrl","history","encodeURI","listingData","formatted","unauthorized","componentDidMount","top","behavior","urlParams","listingId","undefined","listing","published","user_id","user","_id","render","display","flex","justifyContent","paddingRight","height","width","key","coords","cover_photos","site_photos","margin","color","pricingInfo","askingPrice","capitalizeFirst","contactInfo","forSale","forLease","Object","entries","locationDetails","textAlign","formatKeys","indexOf","contact_photos","marginTop","marginBottom","fontWeight","relationship","padding","ownershipDetails","mapStateToProps","addressSelector","userSelector","address","substring","toUpperCase","char"],"sources":["/Users/sumanthvarma/Desktop/frontend/src/Components/Listings/ListingView/index.js"],"sourcesContent":["import React  from 'react'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect';\nimport * as selectors from '../../../Reducers/selectors'\nimport { Link, withRouter } from 'react-router-dom'\nimport { getListingById } from '../../../Requests/listings-requests'\nimport Table from 'react-bootstrap/Table'\nimport GridLoader from \"../../UI/GridLoader\"\nimport Slideshow from \"../../UI/Slideshow\"\nimport { GOOGLE_KEY, S3_BASE } from \"../../../Constants\"\nimport GoogleMapReact from 'google-map-react';\nimport { renderMarker, BLUE_MARKER } from \"../../Map/GoogleMaps/GoogleMapComponents\"\nimport Image from 'react-bootstrap/Image'\nimport PublishedStatus from '../PublishStatus'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faMapMarkedAlt} from '@fortawesome/free-solid-svg-icons'\nimport MediaQuery from 'react-responsive';\n\nconst lightBg = 'rgb(31,33,48)'\n\nclass ListingView extends React.Component {\n\n    constructor(props) {\n        super(props)\n       \n        this.state = {\n            unauthorized : false\n        }\n    }\n\n    async componentDidMount() {\n\n        window.scrollTo({\n            top: 0,\n            behavior: 'smooth',\n        })\n        \n        // get listing info from url params\n        if (this.props.urlParams) {\n\n            if (this.props.urlParams.listingId != undefined) {\n                let listing = await getListingById(this.props.urlParams.listingId)\n   \n                if (listing.length > 0) {\n                    this.setState({ listingData : listing[0]})\n                    // check ownership\n                    if (!listing[0].published && listing[0].user_id !== this.props.user._id) {\n                        this.setState({ unauthorized : true })\n                    }\n                }\n            }\n        }        \n    }\n\n    setLocation = (location) => {\n        this.setState({ location : location })\n        this.addFormInfo(location, 'location')\n        this.handleNext()\n    }\n\n    handleChange = e => {\n        this.setState({body: e.target.value})\n    }\n\n    handleTabPress = index => {\n        this.setState({ index : index })\n    }\n\n    addFormInfo = (data, category )=> {\n        this.setState({ formData : {...this.state.formData, [category] : data }})\n    }\n\n    handleNext = () => {\n        this.setState({ index : this.state.index+1})\n        window.scrollTo(0, 0)\n    }\n\n    handleSetPhotos = (category, photos) => {\n        let photosState = this.state.photos\n        let removals = []\n\n        for (let i=0; i < photosState[category].length; i++) {\n            for (let j=0; j < photos.length; j++) {\n                 if (photosState[category][i].name == photos[j].name) {\n                    removals.push(j)\n                    break;\n                }\n            }\n        }\n\n        for (let i=0; i < removals.length; i++) {\n            photos.splice(removals[i], 1)\n        }\n\n        photosState[category] =  photosState[category].concat(photos)\n        this.setState({ photos : photosState})\n    }\n\n    removePhoto = (category, index) => {\n        let photosState = this.state.photos\n        photosState[category].splice(index, 1)\n\n        this.setState({ photos : photosState, [category + '_key'] : this.state[category + '_key'] *-1 })\n    }\n\n    apiIsLoaded = (map, maps, center) => {\n        this.state.map = map\n        renderMarker('your_business', center, map, 'Your Business', BLUE_MARKER)\n    }\n\n    getMapOptions = (maps) => {\n\n        return {\n            streetViewControl: false,\n            scaleControl: true,\n            fullscreenControl: false,\n            styles: [{\n                featureType: \"poi.business\",\n                elementType: \"labels\",\n                stylers: [{\n                    visibility: \"off\"\n                }]\n            }],\n            gestureHandling: \"greedy\",\n            disableDoubleClickZoom: true,\n            minZoom: 11,\n            maxZoom: 18,\n    \n            mapTypeControl: true,\n            mapTypeId: maps.MapTypeId.ROADMAP,\n            mapTypeControlOptions: {\n                style: maps.MapTypeControlStyle.HORIZONTAL_BAR,\n                position: maps.ControlPosition.BOTTOM_CENTER,\n                mapTypeIds: [\n                    maps.MapTypeId.ROADMAP,\n                    maps.MapTypeId.SATELLITE,\n                    maps.MapTypeId.HYBRID\n                ]\n            },\n    \n            zoomControl: true,\n            clickableIcons: false\n        };\n    }\n\n    getUrl = () => {\n        this.props.history.push('/\"'+encodeURI(this.state.listingData.location.formatted) + '\"/none')\n    }\n\n    render() {\n        let data = this.state.listingData\n        const { unauthorized } = this.state;\n\n        if (unauthorized) {\n            return (\n                <div className=\"warningPage\">\n                <h3>Sorry, this listing is not yet published</h3>\n            </div>\n            )\n        }\n\n    {/* <div style={{ display: 'flex', flex: 1}}>\n                    <Link style={{  color: 'black', fontSize: '18px', fontWeight: 'bold'}} onClick={this.getUrl}>\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', color: 'white'}}>\n                            <FontAwesomeIcon icon={faMapMarkedAlt} size=\"3x\" color=\"rgb(1,100,182\" style={{ marginBottom: '0.25em'}}/>\n                            Go to map view\n                        </div>\n                    </Link>\n                </div> */}\n\n        return (\n            <div className='listingPage'>\n               \n                    <div className='listingLoadingContainer' style={(this.state.listingData == undefined) ? {} : {display : 'none'}}> \n                        {this.state.listingData == undefined && \n                            <GridLoader color={\"#0892d0\"}/>\n                        }     \n                    </div>\n                        { this.state.listingData != undefined &&\n                            <div className='listingContainer'>\n                                <div className=\"listingHeader\">\n                      \n                                    <div style={{ display: 'flex', flex: 1  }}>\n                                        <h3 className='listingAddressText'>{this.state.listingData.location.formatted}</h3>\n                                    </div>\n                                    <div style={{ display: 'flex', flex: 1, justifyContent: 'flex-end', paddingRight: '1.5em'}}>\n                                        <PublishedStatus published={this.state.listingData.published} size=\"2x\" fontColor=\"white\"/>\n                                    </div>\n                                </div>\n                    \n                                    <MediaQuery  minDeviceWidth={551}>\n                                        <div className='listingMediaContainer'>\n                                            <div className='listingMapContainer'style={{ height: '400px', width: '39.25%' }}>\n                                                <GoogleMapReact\n                                                    bootstrapURLKeys={{ key: GOOGLE_KEY }}\n                                                    defaultCenter={this.state.listingData.location.coords}\n                                                    defaultZoom={17}\n                                                    yesIWantToUseGoogleMapApiInternals={true}\n                                                    layerTypes={['TrafficLayer', 'TransitLayer']}\n                                                    id={'map_list_view'}\n                                                    onGoogleApiLoaded={({ map, maps }) => this.apiIsLoaded(map, maps, this.state.listingData.location.coords)}\n                                                    options = {this.getMapOptions}\n                                                />\n                                            </div>\n                                            <Slideshow width={'60%'} height={'400px'} photos={this.state.listingData.photos?.cover_photos.concat(this.state.listingData.photos.site_photos)}/>\n                                        </div>\n                                    </MediaQuery>\n                                    <MediaQuery  maxDeviceWidth={551}>\n                                        <div className='listingMediaContainer'>\n                                            <Slideshow width={'100%'} height={'400px'} photos={this.state.listingData.photos?.cover_photos.concat(this.state.listingData.photos.site_photos)}/>\n                                            <div className='listingMapContainer'style={{ height: '200px', width: '100%' }}>\n                                                <GoogleMapReact\n                                                    bootstrapURLKeys={{ key: GOOGLE_KEY }}\n                                                    defaultCenter={this.state.listingData.location.coords}\n                                                    defaultZoom={17}\n                                                    yesIWantToUseGoogleMapApiInternals={true}\n                                                    layerTypes={['TrafficLayer', 'TransitLayer']}\n                                                    id={'map_list_view'}\n                                                    onGoogleApiLoaded={({ map, maps }) => this.apiIsLoaded(map, maps, this.state.listingData.location.coords)}\n                                                    options = {this.getMapOptions}\n                                                />\n                                            </div>\n                                        </div>\n                                    </MediaQuery>\n                        \n                            <div className=\"listingViewBottom\">\n                                <div style={{ width: '65%', margin: '2.5%'}}>\n\n                                <h3 className=\"listingTableHeader\" style={{ color: 'white'}}>Listing Summary</h3>\n                                <Table  className=\"listingDataTable\" striped bordered hover variant=\"light\">\n                                    <tbody>\n                                        <tr>\n                                        <td>Address</td>\n                                        <td className=\"tableValue\">{data.location.formatted}</td>\n                                        </tr>\n                                        <tr>\n                                        <td>Asking price</td>\n                                        <td className=\"tableValue\">{(data.pricingInfo.askingPrice != undefined) ? `$ ${data.pricingInfo.askingPrice}` : \"Unavailable\"}</td>\n                                        </tr>\n                                        <tr>\n                                        <td>For Sale?</td>\n                                        <td className=\"tableValue\">{capitalizeFirst(data.contactInfo.forSale)}</td>\n                                        </tr>\n                                        <tr>\n                                        <td>For Lease?</td>\n                                        <td className=\"tableValue\" >{capitalizeFirst(data.contactInfo.forLease)}</td>\n                                        </tr>\n                                    </tbody>\n                                </Table>\n                                \n                                <h3 className=\"listingTableHeader\" style={{ color: 'white'}}>Location Details</h3>\n                                {Object.entries(data.locationDetails).length == 0 && <p style={{ color: 'white', textAlign: 'left'}}>This information is unavailable or has not been provided yet</p>}\n                                <Table  className=\"listingDataTable\" striped bordered hover variant=\"light\" >\n                                        <tbody>\n                                            {Object.entries(data.locationDetails).map(([key, value], i) => {\n\n                                                // C/O\n                                                if (key == \"hasOccupancyCert\") {\n                                                    return (\n                                                        <tr>\n                                                            <td>{\"Has CO\"}</td>\n                                                            <td className=\"tableValue\">{capitalizeFirst(value)}</td>\n                                                        </tr>\n                                                    )\n                                                }\n\n                                                // ingress\n                                                if (key == \"ingressInfo\") {\n                                                    return (\n                                                        <tr>\n                                                            <td>{\"Means of Ingress/Egress\"}</td>\n                                                            <td className=\"tableValue\">{capitalizeFirst(value)}</td>\n                                                        </tr>\n                                                    )\n                                                }\n\n                                                return (\n                                                    <tr>\n                                                        <td>{formatKeys(key)}</td>\n                                                        <td className=\"tableValue\">{capitalizeFirst(value)}</td>\n                                                    </tr>\n                                                )\n                                            })\n                                            }\n                                        </tbody>\n                                </Table>\n\n                                <h3 className=\"listingTableHeader\" style={{ color: 'white'}}>Pricing Info</h3>\n                                {Object.entries(data.pricingInfo).length == 0 && <p style={{ color: 'white', textAlign: 'left'}}>This information is unavailable or has not been provided yet</p>}\n                                <Table  className=\"listingDataTable\" striped bordered hover variant=\"light\" >\n                                        <tbody>\n                                            {Object.entries(data.pricingInfo).map(([key, value], i) => {\n                                                return (\n                                                    <tr>\n                                                        <td>{formatKeys(key)}</td>\n                                                        <td className=\"tableValue\">{(key.indexOf('Price') > -1 || key.indexOf('Cost') > -1) ? '$' + capitalizeFirst(value) : capitalizeFirst(value)}</td>\n                                                    </tr>\n                                                )\n                                            })\n                                            }\n                                        </tbody>\n                                </Table>\n\n                            </div>\n\n                            <div className=\"contact_info_panel\">\n                                <h3>Contact Information</h3>\n                                {data.photos?.contact_photos.length > 0 &&\n                                    <Image src={S3_BASE+ data.photos?.contact_photos[0]}  className=\"contactPhoto\" /> \n                                }\n                                <p style={{ marginTop: '0.5em', marginBottom: '0.5em', fontWeight: 'bold', color: 'white'}}>\n                                { (data.contactInfo.relationship != 'other') ? capitalizeFirst(data.contactInfo.relationship) : 'Other (non broker/landlord)' }\n                                </p>\n                                <div style={{ padding: '0.5em'}}>\n                                    <p style={{ color: 'white'}}>{data.contactInfo.ownershipDetails}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                }\n            </div>\n       )\n    }\n }\n\n \n const mapStateToProps = createSelector(\n     selectors.addressSelector,\n     selectors.userSelector,\n    (address, user) => ({\n        address, user \n    })\n )\n\n const capitalizeFirst = value => {\n    return (value) ? value.substring(0,1).toUpperCase() + value.substring(1, value.length) : '';\n }\n\n const formatKeys = value => {\n    let formatted = \"\"\n    for (let i=0; i < value.length; i++) {\n        let char = value.substring(i, i+1)\n        if (i == 0) {\n            formatted += char.toUpperCase()\n            continue;\n        }\n        \n        if (char == char.toUpperCase()) {\n            formatted += \" \" + char\n            continue;\n        }\n\n        formatted += char;\n    }\n    return formatted;\n }\n\n\n export default withRouter(connect(mapStateToProps)(ListingView))\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}