{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{connect}from'react-redux';import{createSelector}from'reselect';import*as selectors from'../../../Reducers/selectors';import'../../../css/listingView.scss';import{Link,withRouter}from'react-router-dom';import{getRecents}from'../../../Requests/listings-requests';import MultiSlideshow from\"./MultipleSlideShow\";import{useMediaQuery}from'react-responsive';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var S3_BASE=\"https://landmarkbucket2.s3.amazonaws.com/\";var darkBg='rgb(26,28,41)';var lightBg='rgb(31,33,48)';var textPrimary='whitesmoke';function ListingsBrowse(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listings=_useState2[0],setListings=_useState2[1];var isMobile=useMediaQuery({query:'(max-width:551px)'});var setSize=isMobile?1:3;useEffect(function(){var init=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,triplets,tripletIndex,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getRecents();case 2:data=_context.sent;triplets=[[]];tripletIndex=0;if(!(data===undefined)){_context.next=7;break;}return _context.abrupt(\"return\");case 7://set at 9 most recent\ni=0;while(i<9&&i<data.length){if(triplets[tripletIndex].length===setSize){tripletIndex+=1;triplets.push([]);}triplets[tripletIndex].push(data[i]);i+=1;}setListings(triplets);case 10:case\"end\":return _context.stop();}}},_callee);}));return function init(){return _ref.apply(this,arguments);};}();init();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'80%',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{id:\"previewHeader\",style:{width:'100%',backgroundColor:lightBg,display:'flex',flexDirection:'row',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'white',textAlign:'left',paddingTop:'0.5em',paddingLeft:'0.5em'},children:\"Recent Listings\"}),/*#__PURE__*/_jsxs(Link,{to:\"listings/browse\",style:{textDecorationLine:'underline',color:'white'},children:[\" \",/*#__PURE__*/_jsx(\"h3\",{style:{color:'white',textAlign:'left',paddingTop:'0.5em',paddingRight:'0.5em'},children:\"See more...\"})]})]}),/*#__PURE__*/_jsx(MultiSlideshow,{width:'100%',height:'400px',data:listings})]});}var mapStateToProps=createSelector(selectors.addressSelector,selectors.userSelector,function(address,user){return{address:address,user:user};});var capitalizeFirst=function capitalizeFirst(value){return value.substring(0,1).toUpperCase()+value.substring(1,value.length);};var formatKeys=function formatKeys(value){var formatted=\"\";for(var i=0;i<value.length;i++){var char=value.substring(i,i+1);if(i==0){formatted+=char.toUpperCase();continue;}if(char==char.toUpperCase()){formatted+=\" \"+char;continue;}formatted+=char;}return formatted;};export default withRouter(connect(mapStateToProps)(ListingsBrowse));/**\n  * \n        const getUrl = () => {\n            let address = encodeURI(JSON.stringify(this.state.listingData.location.formatted))\n            let business_type = \"restaurant\"\n            let url = '/' + address + '/' + business_type\n            return url\n        }\n  */","map":{"version":3,"names":["React","useState","useEffect","connect","createSelector","selectors","Link","withRouter","getRecents","MultiSlideshow","useMediaQuery","S3_BASE","darkBg","lightBg","textPrimary","ListingsBrowse","listings","setListings","isMobile","query","setSize","init","data","triplets","tripletIndex","undefined","i","length","push","width","height","display","flexDirection","alignItems","backgroundColor","justifyContent","color","textAlign","paddingTop","paddingLeft","textDecorationLine","paddingRight","mapStateToProps","addressSelector","userSelector","address","user","capitalizeFirst","value","substring","toUpperCase","formatKeys","formatted","char"],"sources":["/Users/sumanthvarma/Desktop/frontend/src/Components/Listings/ListingPreviews/index.js"],"sourcesContent":["import React, { useState, useEffect}  from 'react'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect';\nimport * as selectors from '../../../Reducers/selectors'\nimport '../../../css/listingView.scss';\nimport { Link, withRouter } from 'react-router-dom'\nimport { getRecents } from '../../../Requests/listings-requests'\nimport MultiSlideshow from \"./MultipleSlideShow\"\nimport { useMediaQuery } from 'react-responsive'\n\nconst S3_BASE = \"https://landmarkbucket2.s3.amazonaws.com/\"\nconst darkBg = 'rgb(26,28,41)'\nconst lightBg = 'rgb(31,33,48)'\nconst textPrimary = 'whitesmoke'\n\nfunction ListingsBrowse() {\n\n    const [listings, setListings] = useState([])\n    const isMobile = useMediaQuery({\n        query: '(max-width:551px)'\n    })\n    const setSize = (isMobile) ? 1 : 3\n\n    useEffect(() => {\n        const init = async () => {\n            let data = await getRecents()\n            let triplets = [[]]\n            let tripletIndex = 0\n    \n            if (data === undefined) return;\n \n            //set at 9 most recent\n            let i=0;\n            while ( i < 9 && i < data.length) {\n                if (triplets[tripletIndex].length === setSize) {\n                    tripletIndex += 1\n                    triplets.push([])\n                }\n    \n                triplets[tripletIndex].push(data[i]) \n                i += 1;\n            }\n   \n            setListings(triplets)\n        }\n        \n        init()\n    }, [])\n\n\n    return (\n            <div style={{  width: '100%', height: '80%',  display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\n                <div id=\"previewHeader\" style={{ width: '100%', backgroundColor: lightBg, display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center'}}>\n                    <h3  style={{ color: 'white', textAlign: 'left', paddingTop: '0.5em', paddingLeft: '0.5em'}}>Recent Listings</h3>\n                    <Link to=\"listings/browse\" style={{textDecorationLine: 'underline', color: 'white'}}> <h3  style={{ color: 'white', textAlign: 'left', paddingTop: '0.5em', paddingRight: '0.5em'}}>See more...</h3></Link>\n                </div>\n                <MultiSlideshow width={'100%'} height={'400px'} data={listings}/>  \n            </div>\n       )\n    }\n\n \n const mapStateToProps = createSelector(\n     selectors.addressSelector,\n     selectors.userSelector,\n    (address, user) => ({\n        address, user \n    })\n )\n\n const capitalizeFirst = value => {\n    return value.substring(0,1).toUpperCase() + value.substring(1, value.length)\n }\n\n const formatKeys = value => {\n    let formatted = \"\"\n    for (let i=0; i < value.length; i++) {\n        let char = value.substring(i, i+1)\n        if (i == 0) {\n            formatted += char.toUpperCase()\n            continue;\n        }\n        \n        if (char == char.toUpperCase()) {\n            formatted += \" \" + char\n            continue;\n        }\n\n        formatted += char;\n    }\n    return formatted;\n }\n\n\n export default withRouter(connect(mapStateToProps)(ListingsBrowse))\n\n\n\n /**\n  * \n        const getUrl = () => {\n            let address = encodeURI(JSON.stringify(this.state.listingData.location.formatted))\n            let business_type = \"restaurant\"\n            let url = '/' + address + '/' + business_type\n            return url\n        }\n  */\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}