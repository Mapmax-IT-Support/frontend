{"ast":null,"code":"var _jsxFileName = \"/Users/sumanthvarma/Desktop/frontend/src/Components/Profile/MyListingItem.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport * as selectors from '../../Reducers/selectors';\nimport '../../css/listingView.scss';\nimport { Link, withRouter } from 'react-router-dom';\nimport { deleteListing } from \"../../Requests/listings-requests\";\nimport Image from \"react-bootstrap/Image\";\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport { S3_BASE } from \"../../Constants\";\nimport PublishedStatus from \"../Listings/PublishStatus\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ListingItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getUrl = () => {\n      let url = '/listing/' + this.props.listing.listingId;\n      return url;\n    };\n\n    this.getMapUrl = () => {\n      let address = encodeURI(JSON.stringify(this.props.listing.location.formatted));\n      let business_type = \"restaurant\";\n      let url = '/' + address + '/' + business_type;\n      return url;\n    };\n\n    this.navigateToListing = () => {\n      this.props.history.push(this.getUrl());\n    };\n\n    this.handleDeleteListing = async () => {\n      let res = await deleteListing(this.props.listing.listingId);\n      this.setState({\n        showModal: false\n      });\n      this.props.handleDeleteListing(this.props.listing.listingId);\n    };\n\n    this.handleUpdate = () => {\n      const {\n        history,\n        listing\n      } = this.props;\n      history.push('/addlisting/' + listing.listingId);\n    };\n\n    this.state = {\n      listings: [],\n      startIndex: 0,\n      limit: 20,\n      showModal: false\n    };\n  }\n\n  render() {\n    var _listing$photos;\n\n    const {\n      listing\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"my-listing-item\",\n      children: [/*#__PURE__*/_jsxDEV(MyVerticallyCenteredModal, {\n        show: this.state.showModal,\n        onHide: () => this.setState({\n          showModal: false\n        }),\n        handleAction: this.handleDeleteListing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-listing-photo\",\n        children: /*#__PURE__*/_jsxDEV(Image, {\n          onClick: this.navigateToListing,\n          className: \"listingCard\",\n          src: S3_BASE + ((_listing$photos = listing.photos) === null || _listing$photos === void 0 ? void 0 : _listing$photos.cover_photos[0]),\n          style: {\n            width: '100%',\n            height: '100%'\n          },\n          fluid: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-listing-links\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: this.getUrl,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"my-listing-link\",\n            children: listing.location.formatted\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: this.handleUpdate,\n            style: {\n              marginRight: '0.5em'\n            },\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            onClick: () => this.setState({\n              showModal: true\n            }),\n            children: \"Remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PublishedStatus, {\n        published: listing.published\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = createSelector(selectors.addressSelector, selectors.userSelector, (address, user) => ({\n  address,\n  user\n}));\n\nconst MyVerticallyCenteredModal = props => {\n  return /*#__PURE__*/_jsxDEV(Modal, { ...props,\n    size: \"md\",\n    \"aria-labelledby\": \"contained-modal-title-vcenter\",\n    centered: true,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        id: \"contained-modal-title-vcenter\",\n        style: {\n          display: 'flex',\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: \"Are you sure you want to remove this listing?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: props.onHide,\n        variant: 'secondary',\n        style: {\n          marginRight: '2em'\n        },\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: props.handleAction,\n        variant: \"danger\",\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 7\n  }, this);\n};\n\n_c = MyVerticallyCenteredModal;\nexport default withRouter(connect(mapStateToProps)(ListingItem));\n\nvar _c;\n\n$RefreshReg$(_c, \"MyVerticallyCenteredModal\");","map":{"version":3,"names":["React","connect","createSelector","selectors","Link","withRouter","deleteListing","Image","Button","Modal","S3_BASE","PublishedStatus","ListingItem","Component","constructor","props","getUrl","url","listing","listingId","getMapUrl","address","encodeURI","JSON","stringify","location","formatted","business_type","navigateToListing","history","push","handleDeleteListing","res","setState","showModal","handleUpdate","state","listings","startIndex","limit","render","photos","cover_photos","width","height","marginRight","published","mapStateToProps","addressSelector","userSelector","user","MyVerticallyCenteredModal","display","justifyContent","textAlign","onHide","handleAction"],"sources":["/Users/sumanthvarma/Desktop/frontend/src/Components/Profile/MyListingItem.js"],"sourcesContent":["import React  from 'react'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect';\nimport * as selectors from '../../Reducers/selectors'\nimport '../../css/listingView.scss';\nimport { Link, withRouter } from 'react-router-dom'\nimport { deleteListing} from \"../../Requests/listings-requests\"\nimport Image from \"react-bootstrap/Image\"\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport { S3_BASE } from \"../../Constants\"\nimport PublishedStatus from \"../Listings/PublishStatus\"\n\nclass ListingItem extends React.Component {\n\n    constructor(props) {\n        super(props)\n       \n        this.state = {\n            listings : [],\n            startIndex: 0,\n            limit : 20,\n            showModal : false,\n        }\n    }\n\n    getUrl = () => {\n        let url = '/listing/' + this.props.listing.listingId\n        return url\n    }\n\n    getMapUrl = () => {\n        let address = encodeURI(JSON.stringify(this.props.listing.location.formatted))\n        let business_type = \"restaurant\"\n        let url = '/' + address + '/' + business_type\n        return url\n    }\n\n    navigateToListing = () => {\n        this.props.history.push(this.getUrl())\n    }\n\n    handleDeleteListing = async () => {\n        let res = await deleteListing(this.props.listing.listingId)\n\n        this.setState({ showModal : false })\n        this.props.handleDeleteListing(this.props.listing.listingId)\n    }\n\n    handleUpdate = () => {\n       const { history, listing} = this.props\n       history.push('/addlisting/' + listing.listingId)\n    }\n\n    render() {\n      const { listing } = this.props;\n\n        return (\n            <div className=\"my-listing-item\" >\n                <MyVerticallyCenteredModal\n                    show={this.state.showModal}\n                    onHide={() => this.setState({showModal:false})}\n                    handleAction={this.handleDeleteListing}\n                />          \n                <div className=\"my-listing-photo\">\n                    <Image \n                        onClick={this.navigateToListing}\n                        className=\"listingCard\"\n                        src={S3_BASE + listing.photos?.cover_photos[0]}\n                        style={{ width: '100%', height: '100%'}}\n                        fluid\n                    />\n                </div>\n\n                <div className=\"my-listing-links\">\n                    <Link to={this.getUrl}>\n                        <span className=\"my-listing-link\">{listing.location.formatted}</span>\n                    </Link>\n                    <div>\n                        <Button variant=\"primary\" onClick={this.handleUpdate} style={{ marginRight: '0.5em'}}>\n                            Update\n                        </Button>\n                        <Button variant=\"danger\" onClick={() => this.setState({ showModal : true })}>\n                            Remove\n                        </Button>\n                    </div>\n                </div>\n               <PublishedStatus published={listing.published}/>\n            </div>\n       )\n    }\n }\n \n const mapStateToProps = createSelector(\n     selectors.addressSelector,\n     selectors.userSelector,\n    (address, user) => ({\n        address, user \n    })\n )\n\n const MyVerticallyCenteredModal = (props) => {\n    return (\n      <Modal\n        {...props}\n        size=\"md\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n        \n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-vcenter\"style={{ display : 'flex', justifyContent: 'center'}}>\n           <span style={{ textAlign : 'center'}}>Are you sure you want to remove this listing?</span>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body style={{ display : 'flex', justifyContent: 'center'}}>\n        \n         <Button onClick={props.onHide} variant={'secondary'} style={{ marginRight: '2em'}}>Cancel</Button>\n         <Button onClick={props.handleAction} variant=\"danger\" >\n            Delete\n         </Button>\n          \n        </Modal.Body>\n      </Modal>\n    );\n  }\n  \n\n\n export default withRouter(connect(mapStateToProps)(ListingItem))\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}