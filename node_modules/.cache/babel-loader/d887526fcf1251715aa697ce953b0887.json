{"ast":null,"code":"import _objectSpread from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/sumanthvarma/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{connect}from'react-redux';import{createSelector}from'reselect';import*as selectors from'../../Reducers/selectors';import'../../css/listingView.scss';import{Link,withRouter}from'react-router-dom';import{deleteListing}from\"../../Requests/listings-requests\";import Image from\"react-bootstrap/Image\";import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';import{S3_BASE}from\"../../Constants\";import PublishedStatus from\"../Listings/PublishStatus\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListingItem=/*#__PURE__*/function(_React$Component){_inherits(ListingItem,_React$Component);var _super=_createSuper(ListingItem);function ListingItem(props){var _this;_classCallCheck(this,ListingItem);_this=_super.call(this,props);_this.getUrl=function(){var url='/listing/'+_this.props.listing.listingId;return url;};_this.getMapUrl=function(){var address=encodeURI(JSON.stringify(_this.props.listing.location.formatted));var business_type=\"restaurant\";var url='/'+address+'/'+business_type;return url;};_this.navigateToListing=function(){_this.props.history.push(_this.getUrl());};_this.handleDeleteListing=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return deleteListing(_this.props.listing.listingId);case 2:res=_context.sent;_this.setState({showModal:false});_this.props.handleDeleteListing(_this.props.listing.listingId);case 5:case\"end\":return _context.stop();}}},_callee);}));_this.handleUpdate=function(){var _this$props=_this.props,history=_this$props.history,listing=_this$props.listing;history.push('/addlisting/'+listing.listingId);};_this.state={listings:[],startIndex:0,limit:20,showModal:false};return _this;}_createClass(ListingItem,[{key:\"render\",value:function render(){var _this2=this,_listing$photos;var listing=this.props.listing;return/*#__PURE__*/_jsxs(\"div\",{className:\"my-listing-item\",children:[/*#__PURE__*/_jsx(MyVerticallyCenteredModal,{show:this.state.showModal,onHide:function onHide(){return _this2.setState({showModal:false});},handleAction:this.handleDeleteListing}),/*#__PURE__*/_jsx(\"div\",{className:\"my-listing-photo\",children:/*#__PURE__*/_jsx(Image,{onClick:this.navigateToListing,className:\"listingCard\",src:S3_BASE+((_listing$photos=listing.photos)===null||_listing$photos===void 0?void 0:_listing$photos.cover_photos[0]),style:{width:'100%',height:'100%'},fluid:true})}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-listing-links\",children:[/*#__PURE__*/_jsx(Link,{to:this.getUrl,children:/*#__PURE__*/_jsx(\"span\",{className:\"my-listing-link\",children:listing.location.formatted})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:this.handleUpdate,style:{marginRight:'0.5em'},children:\"Update\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return _this2.setState({showModal:true});},children:\"Remove\"})]})]}),/*#__PURE__*/_jsx(PublishedStatus,{published:listing.published})]});}}]);return ListingItem;}(React.Component);var mapStateToProps=createSelector(selectors.addressSelector,selectors.userSelector,function(address,user){return{address:address,user:user};});var MyVerticallyCenteredModal=function MyVerticallyCenteredModal(props){return/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"md\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",style:{display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(\"span\",{style:{textAlign:'center'},children:\"Are you sure you want to remove this listing?\"})})}),/*#__PURE__*/_jsxs(Modal.Body,{style:{display:'flex',justifyContent:'center'},children:[/*#__PURE__*/_jsx(Button,{onClick:props.onHide,variant:'secondary',style:{marginRight:'2em'},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:props.handleAction,variant:\"danger\",children:\"Delete\"})]})]}));};export default withRouter(connect(mapStateToProps)(ListingItem));","map":{"version":3,"names":["React","connect","createSelector","selectors","Link","withRouter","deleteListing","Image","Button","Modal","S3_BASE","PublishedStatus","ListingItem","props","getUrl","url","listing","listingId","getMapUrl","address","encodeURI","JSON","stringify","location","formatted","business_type","navigateToListing","history","push","handleDeleteListing","res","setState","showModal","handleUpdate","state","listings","startIndex","limit","photos","cover_photos","width","height","marginRight","published","Component","mapStateToProps","addressSelector","userSelector","user","MyVerticallyCenteredModal","display","justifyContent","textAlign","onHide","handleAction"],"sources":["/Users/sumanthvarma/Desktop/frontend/src/Components/Profile/MyListingItem.js"],"sourcesContent":["import React  from 'react'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect';\nimport * as selectors from '../../Reducers/selectors'\nimport '../../css/listingView.scss';\nimport { Link, withRouter } from 'react-router-dom'\nimport { deleteListing} from \"../../Requests/listings-requests\"\nimport Image from \"react-bootstrap/Image\"\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport { S3_BASE } from \"../../Constants\"\nimport PublishedStatus from \"../Listings/PublishStatus\"\n\nclass ListingItem extends React.Component {\n\n    constructor(props) {\n        super(props)\n       \n        this.state = {\n            listings : [],\n            startIndex: 0,\n            limit : 20,\n            showModal : false,\n        }\n    }\n\n    getUrl = () => {\n        let url = '/listing/' + this.props.listing.listingId\n        return url\n    }\n\n    getMapUrl = () => {\n        let address = encodeURI(JSON.stringify(this.props.listing.location.formatted))\n        let business_type = \"restaurant\"\n        let url = '/' + address + '/' + business_type\n        return url\n    }\n\n    navigateToListing = () => {\n        this.props.history.push(this.getUrl())\n    }\n\n    handleDeleteListing = async () => {\n        let res = await deleteListing(this.props.listing.listingId)\n\n        this.setState({ showModal : false })\n        this.props.handleDeleteListing(this.props.listing.listingId)\n    }\n\n    handleUpdate = () => {\n       const { history, listing} = this.props\n       history.push('/addlisting/' + listing.listingId)\n    }\n\n    render() {\n      const { listing } = this.props;\n\n        return (\n            <div className=\"my-listing-item\" >\n                <MyVerticallyCenteredModal\n                    show={this.state.showModal}\n                    onHide={() => this.setState({showModal:false})}\n                    handleAction={this.handleDeleteListing}\n                />          \n                <div className=\"my-listing-photo\">\n                    <Image \n                        onClick={this.navigateToListing}\n                        className=\"listingCard\"\n                        src={S3_BASE + listing.photos?.cover_photos[0]}\n                        style={{ width: '100%', height: '100%'}}\n                        fluid\n                    />\n                </div>\n\n                <div className=\"my-listing-links\">\n                    <Link to={this.getUrl}>\n                        <span className=\"my-listing-link\">{listing.location.formatted}</span>\n                    </Link>\n                    <div>\n                        <Button variant=\"primary\" onClick={this.handleUpdate} style={{ marginRight: '0.5em'}}>\n                            Update\n                        </Button>\n                        <Button variant=\"danger\" onClick={() => this.setState({ showModal : true })}>\n                            Remove\n                        </Button>\n                    </div>\n                </div>\n               <PublishedStatus published={listing.published}/>\n            </div>\n       )\n    }\n }\n \n const mapStateToProps = createSelector(\n     selectors.addressSelector,\n     selectors.userSelector,\n    (address, user) => ({\n        address, user \n    })\n )\n\n const MyVerticallyCenteredModal = (props) => {\n    return (\n      <Modal\n        {...props}\n        size=\"md\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n        \n      >\n        <Modal.Header closeButton>\n          <Modal.Title id=\"contained-modal-title-vcenter\"style={{ display : 'flex', justifyContent: 'center'}}>\n           <span style={{ textAlign : 'center'}}>Are you sure you want to remove this listing?</span>\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body style={{ display : 'flex', justifyContent: 'center'}}>\n        \n         <Button onClick={props.onHide} variant={'secondary'} style={{ marginRight: '2em'}}>Cancel</Button>\n         <Button onClick={props.handleAction} variant=\"danger\" >\n            Delete\n         </Button>\n          \n        </Modal.Body>\n      </Modal>\n    );\n  }\n  \n\n\n export default withRouter(connect(mapStateToProps)(ListingItem))\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}